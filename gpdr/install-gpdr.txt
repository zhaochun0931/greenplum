sudo rpm -ivh greenplum-disaster-recovery-1.2.0-1.el8.x86_64.rpm

sudo chown -R gpadmin:gpadmin /usr/local/gpdr

echo 'source /usr/local/gpdr/gpdr_path.sh' >> ~/.bashrc




gpdr -v


$ gpdr -v
gpdr version 1.2.0
$















# primary cluster

rm /usr/local/gpdr/configs/*

cp /usr/local/gpdr/templates/posix_config_file.yml ~/

gpdr configure backup --config-file posix_config_file.yml



$ gpdr configure backup --config-file posix_config_file.yml
20250502:09:33:33 gpdr:gpadmin:data74:379300-[INFO]:-Configuring for backup
20250502:09:33:34 gpdr:gpadmin:data74:379300-[INFO]:-Successfully created pgbackrest configuration files for backup at /usr/local/gpdr/configs for the GPDB primary cluster
20250502:09:33:35 gpdr:gpadmin:data74:379300-[INFO]:-Creating pgbackrest stanzas for the GPDB primary cluster
20250502:09:33:36 gpdr:gpadmin:data74:379300-[INFO]:-Successfully created stanzas for the GPDB primary cluster
20250502:09:33:36 gpdr:gpadmin:data74:379300-[INFO]:-Configuring GPDB GUCs
20250502:09:33:50 gpdr:gpadmin:data74:379300-[INFO]:-Successfully configured GPDB GUCs and enabled WAL archiving
20250502:09:33:53 gpdr:gpadmin:data74:379300-[INFO]:-Successfully finished configuration steps for backup
$



gpdr configure backup --reconfigure posix_config_file.yml









# recovery cluster
gpdr configure restore --config-file posix_config_file.yml --use-existing-cluster


gpdr configure restore --config-file posix_config_file.yml --recovery-cluster-config-file recovery_cluster_config_file_gp6.yml






# primary cluster
gpdr backup --type full



# recovery cluster
gpstop -af
gpdr restore -t incr --restore-point latest
gpdr info restore
gpdr promote
gpstart








