yum install postgresql-contrib

apt-get install postgresql-contrib





psql postgres


SELECT * FROM pg_extension WHERE extname = 'pgcrypto';





CREATE EXTENSION pgcrypto;

postgres=# CREATE EXTENSION pgcrypto;
CREATE EXTENSION
postgres=#




postgres=# SELECT * FROM pg_extension WHERE extname = 'pgcrypto';
  oid  | extname  | extowner | extnamespace | extrelocatable | extversion | extconfig | extcondition
-------+----------+----------+--------------+----------------+------------+-----------+--------------
 16398 | pgcrypto |       10 |         2200 | t              | 1.3        |           |
(1 row)

postgres=#




DROP EXTENSION IF EXISTS pgcrypto;





gpconfig -c shared_preload_libraries -v 'pgcrypto'


gpstop -ra









gpconfig -s shared_preload_libraries






# test


ALTER DATABASE testdb SET pgcrypto.fips TO on;


CREATE TABLE users (
    id int,
    name VARCHAR(100) NOT NULL,
    email VARCHAR(100) NOT NULL,
    encrypted_password BYTEA -- BYTEA is used to store binary data (encrypted content)
);



INSERT INTO users (name, email, encrypted_password)
VALUES
('Alice', 'alice@example.com', pgp_sym_encrypt('mysecretpassword', 'encryption_key'));




SELECT name, email, pgp_sym_decrypt(encrypted_password, 'encryption_key') AS decrypted_password
FROM users
WHERE name = 'Alice';


